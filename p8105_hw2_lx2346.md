p8105_hw2_lx2346
================
linshan
2024-09-25

# Problem 1

Prepare for the packages that may be used

``` r
library(tidyverse)
```

    ## ── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
    ## ✔ dplyr     1.1.4     ✔ readr     2.1.5
    ## ✔ forcats   1.0.0     ✔ stringr   1.5.1
    ## ✔ ggplot2   3.5.1     ✔ tibble    3.2.1
    ## ✔ lubridate 1.9.3     ✔ tidyr     1.3.1
    ## ✔ purrr     1.0.2     
    ## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
    ## ✖ dplyr::filter() masks stats::filter()
    ## ✖ dplyr::lag()    masks stats::lag()
    ## ℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors

## import and clean the NYC Transit data

``` r
nyc_tran = read_csv("./data of hw2/NYC_Transit_Subway_Entrance_And_Exit_Data.csv",na = "") |>
  janitor::clean_names() |>
  mutate(across(starts_with("route"), as.character)) |>
  pivot_longer(
    route1:route11,
    names_to = NULL, 
    values_to = "routes_served") |>
  filter(routes_served != "") |>
  select(line, station_name, station_latitude,station_longitude, routes_served, entry, vending, entrance_type,ada) |>
  mutate( entry = case_match( entry , "YES"  ~ TRUE, "NO" ~ FALSE)) |>
  mutate( vending = case_match(vending , "YES"  ~ TRUE, "NO" ~ FALSE))
```

    ## Rows: 1868 Columns: 32
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr (22): Division, Line, Station Name, Route1, Route2, Route3, Route4, Rout...
    ## dbl  (8): Station Latitude, Station Longitude, Route8, Route9, Route10, Rout...
    ## lgl  (2): ADA, Free Crossover
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

## Describe what cleaning work I’ve done above.

1.  Clean the names of the dataset  
2.  Combine the routes from route1 to route11 into 1 variable with
    column name routes_served  
3.  Remove blank variable at routes_served  
4.  Select the route, station name, station latitude, station longitude,
    service route, entrance, vending machine, entrance_type, motor
    variable required by the problem  
5.  Convert the entry and vending variable from character (YES vs NO) to
    a logical variable  

## Describe the NYC Transit Data

**The NYC transit data set has 4270 rows and 9 columns. It is a 4270✖️9
table.**  
**The variables in the dataset are line, station_name, station_latitude,
station_longitude, routes_served, entry, vending, entrance_type,
ada.**  
To sum up, the dataset lists each of the entry/exit in each subway
station. It lists whether or not it is a entry, whether or not it has a
vending, whether or not it has a ADA compliance and the entrance type of
each entry/exit. It also lists the information about the station, like
which line and route it belongs to and the station’s locaton(longitude
and latitude).

## Answer the following questions using these data:

**1. How many distinct stations are there? Note that stations are
identified both by name and by line (e.g. 125th St 8th Avenue; 125st
Broadway; 125st Lenox)**  
  
There are 356 distinct stations.

**2. How many stations are ADA compliant?**  

``` r
ada_true = filter(nyc_tran, ada == TRUE)
nrow(distinct(ada_true, station_name))
```

    ## [1] 73

So there are 73 distinct stations which are ADA compliant.  

**3. What proportion of station entrances / exits without vending allow
entrance?**  
  
0.1046838
