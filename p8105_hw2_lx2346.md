p8105_hw2_lx2346
================
linshan
2024-09-25

# Problem 1

Prepare for the packages that may be used

``` r
library(tidyverse)
```

    ## ── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
    ## ✔ dplyr     1.1.4     ✔ readr     2.1.5
    ## ✔ forcats   1.0.0     ✔ stringr   1.5.1
    ## ✔ ggplot2   3.5.1     ✔ tibble    3.2.1
    ## ✔ lubridate 1.9.3     ✔ tidyr     1.3.1
    ## ✔ purrr     1.0.2     
    ## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
    ## ✖ dplyr::filter() masks stats::filter()
    ## ✖ dplyr::lag()    masks stats::lag()
    ## ℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors

## import and clean the NYC Transit data

``` r
nyc_tran = read_csv("./data of hw2/NYC_Transit_Subway_Entrance_And_Exit_Data.csv",na = "") |>
  janitor::clean_names() |>
  mutate(across(starts_with("route"), as.character)) |>
  pivot_longer(
    route1:route11,
    names_to = NULL, 
    values_to = "routes_served") |>
  filter(routes_served != "") |>
  select(line, station_name, station_latitude,station_longitude, routes_served, entry, vending, entrance_type,ada) |>
  mutate( entry = case_match( entry , "YES"  ~ TRUE, "NO" ~ FALSE)) |>
  mutate( vending = case_match(vending , "YES"  ~ TRUE, "NO" ~ FALSE))
```

    ## Rows: 1868 Columns: 32
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr (22): Division, Line, Station Name, Route1, Route2, Route3, Route4, Rout...
    ## dbl  (8): Station Latitude, Station Longitude, Route8, Route9, Route10, Rout...
    ## lgl  (2): ADA, Free Crossover
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

## Describe what cleaning work I’ve done above.

1.  Clean the names of the dataset  
2.  Combine the routes from route1 to route11 into 1 variable with
    column name routes_served  
3.  Remove blank variable at routes_served  
4.  Select the route, station name, station latitude, station longitude,
    service route, entrance, vending machine, entrance_type, motor
    variable required by the problem  
5.  Convert the entry and vending variable from character (YES vs NO) to
    a logical variable  

## Describe the NYC Transit Data

**The NYC transit data set has 4270 rows and 9 columns. It is a 4270✖️9
table.**  
**The variables in the dataset are line, station_name, station_latitude,
station_longitude, routes_served, entry, vending, entrance_type,
ada.**  
To sum up, the dataset lists each of the entry/exit in each subway
station. It lists whether or not it is a entry, whether or not it has a
vending, whether or not it has a ADA compliance and the entrance type of
each entry/exit. It also lists the information about the station, like
which line and route it belongs to and the station’s locaton(longitude
and latitude).

## Answer the following questions using these data:

**1. How many distinct stations are there? Note that stations are
identified both by name and by line (e.g. 125th St 8th Avenue; 125st
Broadway; 125st Lenox)**  
  
There are 356 distinct stations.

**2. How many stations are ADA compliant?**  

``` r
ada_true = filter(nyc_tran, ada == TRUE)
nrow(distinct(ada_true, station_name))
```

    ## [1] 73

So there are 73 distinct stations which are ADA compliant.  

**3. What proportion of station entrances / exits without vending allow
entrance?**  
  
0.1046838

### Reformat data making route number and route name distinct variables

``` r
nyc_tran_2 = read_csv("./data of hw2/NYC_Transit_Subway_Entrance_And_Exit_Data.csv",na = "") |>
  janitor::clean_names() |>
  mutate(across(starts_with("route"), as.character)) |>
  pivot_longer(
    route1:route11,
    names_to = "route_number", 
    values_to = "route_name",
    names_prefix = "route") |>
  filter(route_name != "")
```

    ## Rows: 1868 Columns: 32
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr (22): Division, Line, Station Name, Route1, Route2, Route3, Route4, Rout...
    ## dbl  (8): Station Latitude, Station Longitude, Route8, Route9, Route10, Rout...
    ## lgl  (2): ADA, Free Crossover
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
#find the distinct station serves A route & ada. 
serve_a = filter(nyc_tran_2, route_name == "A")
serve_a_ada = filter(serve_a, ada == TRUE)
```

So there are 56 distinct stations serves A. And among those stations
serves A, there are 16 stations are ADA compliant.

# Problem 2

## import and clean mr_trash data

``` r
library(readxl)
mr_trash = read_excel("./data of hw2/202309 Trash Wheel Collection Data.xlsx", range = "A2:N586") |>
  janitor::clean_names() |>
  mutate(sports_balls = round(sports_balls)) |>
  mutate(sports_balls = as.integer(sports_balls)) |>
  pivot_longer(
    plastic_bottles: sports_balls,
    names_to = "type_of_trash",
    values_to = "numbers"
  ) |>
  mutate(type = "Mr.")
```

## use the same way import Professor Trash Wheel and Gwynnda data

``` r
# import professor trash wheel
prof_trash = read_excel("./data of hw2/202309 Trash Wheel Collection Data.xlsx", sheet = "Professor Trash Wheel", range = "A2:M108") |>
  janitor::clean_names() |>
  pivot_longer(
    plastic_bottles: wrappers,
    names_to = "type_of_trash",
    values_to = "numbers"
  ) |>
  mutate(type = "Professor") |>
  mutate(year = as.character(year))
# import Gwynnda Trash Wheel
gwy_trash = read_excel("./data of hw2/202309 Trash Wheel Collection Data.xlsx", sheet = "Gwynnda Trash Wheel", range = "A2:L157") |>
  janitor::clean_names() |>
  pivot_longer(
    plastic_bottles: wrappers,
    names_to = "type_of_trash",
    values_to = "numbers"
  ) |>
  mutate(type = "Gwynnda") |>
  mutate(year = as.character(year))
```

## combine the 3 dataset

``` r
trash_df = bind_rows( prof_trash, gwy_trash, mr_trash)
```

## Write a paragraph about these data

**The trash_df has 5499 rows and 9 columns. It is a 5499✖10 table.**  
The variables in the dataset are dumpster, month, year, date,
weight_tons, volume_cubic_yards, homes_powered, type_of_trash, numbers,
type, in which, there are mainly three types of trash wheels in the data
frame, which are Mr. Trash Wheel, Professor Trash Wheel and Gwynnda
Trash Wheel. The variable numbers shows the exact number of trash that
the dumpster collect. Home_powered means Each ton of trash equates to on
average 500 kilowatts of electricity. An average household will use 30
kilowatts per day.  

### what was the total weight of trash collected by Professor Trash Wheel?

The total weight of trash Professor Trash Wheel collect is 1297.56 tons.

### What was the total number of cigarette butts collected by Gwynnda in June of 2022?

The total number of cigarette butts collected by Gwynnda in June of 2022
is 3.6701^{5}

# Problem 3

## Part 1: create a single, well-organized dataset with all the information

First of all, read all these tables.

``` r
bakers = read_csv("./data of hw2/gbb_datasets/bakers.csv") |>
  janitor::clean_names()
```

    ## Rows: 120 Columns: 5
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr (3): Baker Name, Baker Occupation, Hometown
    ## dbl (2): Series, Baker Age
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
bakes = read_csv("./data of hw2/gbb_datasets/bakes.csv")|>
  janitor::clean_names()
```

    ## Rows: 548 Columns: 5
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr (3): Baker, Signature Bake, Show Stopper
    ## dbl (2): Series, Episode
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
result = read_csv("./data of hw2/gbb_datasets/results.csv", skip = 2, na = "NA")|>
  janitor::clean_names() |>
  mutate(
    result = case_match(
      result,
      "IN" ~ "stayed in",
      "OUT" ~ "Eliminated",
      "STAR BAKER" ~ "Star Baker", 
      "WINNER" ~ "Series Winner",
      "Runner-up" ~ "Series Runner up",
      "WD" ~ "withdrew")
    )
```

    ## Rows: 1136 Columns: 5
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr (2): baker, result
    ## dbl (3): series, episode, technical
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
viewers = read_csv("./data of hw2/gbb_datasets/viewers.csv")|>
  janitor::clean_names()
```

    ## Rows: 10 Columns: 11
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl (11): Episode, Series 1, Series 2, Series 3, Series 4, Series 5, Series ...
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.
